/*1366841776,178142491*/

if (self.CavalryLogger) { CavalryLogger.start_js(["per82"]); }

__d("ads-currencyMap",[],function(a,b,c,d,e,f){var g={ARS:["{symbol} {amount}","$",100],AUD:["{symbol}{amount}","$",100],BOB:["{symbol} {amount}","$b",100],BRL:["{symbol} {amount}","R$",100],GBP:["{symbol}{amount}","\u00a3",100],CAD:["{symbol}{amount}","$",100],CLP:["{symbol} {amount}","$",1],CNY:["{amount} {symbol}","\uffe5",100],COP:["{symbol} {amount}","$",1],CRC:["{symbol}{amount}","\u20a1",1],CZK:["{amount} {symbol}","K\u010d",100],DKK:["{symbol} {amount}","DKK",100],EUR:["{symbol} {amount}","\u20ac",100],GTQ:["{symbol}{amount}","Q",100],HNL:["{symbol} {amount}","L.",100],HKD:["{symbol}{amount}","$",100],HUF:["{amount} {symbol}","Ft",1],ISK:["{amount} {symbol}","kr.",1],INR:["{symbol} {amount}","\u0930\u0941",100],IDR:["{symbol}{amount}","Rp",1],ILS:["{symbol} {amount}","\u20aa",100],JPY:["{symbol}{amount}","\u00a5",1],KRW:["{symbol}{amount}","\u20a9",1],MOP:["{symbol}{amount}","MOP",100],MYR:["{symbol}{amount}","R",100],MXN:["{symbol}{amount}","$",100],NZD:["{amount}{symbol}","$",100],NIO:["{symbol} {amount}","C$",100],NOK:["{symbol} {amount}","NOK",100],PYG:["{symbol} {amount}","Gs",1],PEN:["{symbol} {amount}","S\/.",100],PHP:["{symbol}{amount}","Php",100],PLN:["{amount} {symbol}","z\u0142",100],QAR:["{amount} {symbol}","\u0631.\u0642.",100],RON:["{amount} {symbol}","lei",100],RUB:["{amount}{symbol}","RUB",100],SAR:["{amount} {symbol}","\u0631.\u0633.",100],SGD:["{symbol}{amount}","$",100],ZAR:["{symbol} {amount}","R",100],SEK:["{amount} {symbol}","kr",100],CHF:["{symbol} {amount}","CHF",100],TWD:["{symbol}{amount}","NT$",1],THB:["{symbol}{amount}","\u0e3f",100],TRY:["{amount} {symbol}","TL",100],AED:["{amount} {symbol}","\u062f.\u0625.",100],USD:["{symbol}{amount}","$",100],UYU:["{symbol} {amount}","$U",100],VEF:["{symbol} {amount}","Bs",100],VND:["{amount} {symbol}","\u20ab",1]};function h(m){if(g[m])return g[m][0];return null;}function i(m){if(g[m])return g[m][1];return null;}function j(m){if(g[m])return 1*g[m][2];return 1;}var k=[];for(var l in g)if(g.hasOwnProperty(l))k.push(l);f.getFormat=h;f.getSymbol=i;f.getOffset=j;f.currencyMapKeys=k;});
__d("ads-lib-formatters",["ads-currencyMap"],function(a,b,c,d,e,f){var g=b('ads-currencyMap'),h='USD';function i(t,u,v){t=t||'';v=v||'';u=typeof u==='undefined'?t.length:u;return t.length>u?(t.substr(0,u-v.length)+v):t;}function j(t,u){if(u===undefined||u===null)u='';return function(v){return !v?u:i(v,t,'...');};}function k(t,u,v,w){if(t==='N/A')return t;t=t||0;v=v||'';w=w||'.';var x='',y=/(\d)(\d\d\d)($|\D)/,z='$1'+v+'$2$3';if(u!=null)t=l(t,u);t=(''+t).replace('.',w);while((x=t.replace(y,z))!=t)t=x;return t;}function l(t,u){var v=Math.pow(10,u);t=Math.round(t*v)/v+'';if(!u)return t;var w=t.indexOf('.'),x=0;if(w==-1){t+='.';x=u;}else x=u-(t.length-w-1);for(var y=0,z=x;y<z;y++)t+='0';return t;}function m(t){return function(u){return k(u,t||0,',','.');};}function n(t){return function(u){return k(u*100,t||0,',','.')+'%';};}var o={};function p(t,u,v){if(t===undefined)t=2;if(v===undefined)v=false;u=u||h;var w=u+'-'+t+'-'+v;if(!o[w]){var x=g.getFormat(u)||g.getFormat(h),y=g.getSymbol(u)||g.getSymbol(h),z=g.getOffset(u)||g.getOffset(h);x=x.replace('{symbol}',y);o[w]=function(aa){if(v)aa=aa/z;if(!(aa+'').match(/^\-?[\d\.,]*$/))return 'N/A';var ba=k(aa,t,',','.');return x.replace('{amount}',ba);};}return o[w];}function q(t){t=(t+'').trim().replace(/^[^\d]*\-/,'\u0002');if(!((/^\u0002?(\d+,\d*){2,}$/.test(t))||(/^\u0002?(\d+\.\d*){2,}$/.test(t))))t=t.replace(/[\.,](\d*\D*)$/,'\u0001$1');t=t.replace(/[^0-9\u0001\u0002]/g,'').replace('\u0001','.').replace('\u0002','-');return +t||0;}function r(){return function(t){return k(t,0,',','.')+'%';};}function s(t){var u=t.currency(),v=t.offset()==100?2:0;return p(v,u);}f.createTextTruncator=j;f.chopString=i;f.parseNumber=q;f.formatNumber=k;f.createNumberFormatter=m;f.createPercentFormatter=n;f.createMoneyFormatter=p;f.createMoneyFormatterForAccount=s;f.createInflationFormatter=r;});
__d("SubscriptionLevels",[],function(a,b,c,d,e,f){var g={ALL:'162318810514679',DEFAULT:'271670892858696',TOP:'266156873403755'};e.exports=g;});
__d("EditSubscriptions",["Event","function-extensions","Arbiter","AsyncRequest","CSS","DOM","MenuDeprecated","Parent","SubscriptionLevels","arrayContains","cx","ge"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('MenuDeprecated'),m=b('Parent'),n=b('SubscriptionLevels'),o=b('arrayContains'),p=b('cx'),q=b('ge'),r=13,s=45,t=[n.ALL,n.DEFAULT,n.TOP],u={},v={},w={},x={},y={},z={},aa={},ba={},ca={},da={},ea={},fa="/ajax/follow/follow_profile.php",ga="/ajax/follow/unfollow_profile.php",ha="/ajax/settings/notifications/notify_me.php",ia={},ja={},ka=null,la=false;function ma(jb){return o(t,jb);}function na(jb,kb,lb,mb){var nb=m.byClass(mb,'uiMenuItem')||m.byClass(mb,"_54ni");if(!nb||!k.contains(jb,nb)){return;}else if(j.hasClass(nb,'SubscribeMenuSubscribeCheckbox')){if(w[kb]){qa(jb,kb);}else pa(jb,kb);return false;}else if(j.hasClass(nb,'SubscribeMenuUnsubscribe')){qa(jb,kb);return false;}else if(j.hasClass(nb,'SubscribeMenuSettingsItem')){db(jb,true);return false;}else if(j.hasClass(nb,'SubscriptionMenuGoBack')){db(jb,false);return false;}else if(j.hasClass(nb,'SubscriptionMenuItem')){oa(jb,kb,lb,nb);return false;}else if(j.hasClass(nb,'SubscribeMenuNotifyMeCheckbox')){if(x[kb]){hb(jb,kb);}else gb(jb,kb);return false;}}function oa(jb,kb,lb,mb){if(j.hasClass(mb,'SubscriptionMenuLevel')){if(l.isItemChecked(mb))return;bb(jb,kb,ua(mb),true,lb);}else if(j.hasClass(mb,'SubscriptionMenuCategory')){ya(kb,mb,!l.isItemChecked(mb),true,lb);}else if(j.hasClass(mb,'SubscriptionAppStory'))ab(kb,mb,!l.isItemChecked(mb),lb);}function pa(jb,kb){var lb={profile_id:kb};h.inform('FollowingUser',lb);new i().setURI(fa).setMethod('POST').setData({profile_id:kb,location:ra(jb)}).setErrorHandler(h.inform.curry('FollowUserFail',lb)).send();}function qa(jb,kb){var lb={profile_id:kb};h.inform('UnfollowingUser',lb);new i().setURI(ga).setMethod('POST').setData({profile_id:kb,location:ra(jb)}).setErrorHandler(h.inform.curry('UnfollowUserFail',lb)).send();}function ra(jb){if(j.hasClass(jb,'followButtonFlyout')){return r;}else return s;}function sa(jb,kb,lb){var mb={profile_id:jb,level:ba[jb],custom_categories:ca[jb],location:lb};new i().setURI('/ajax/follow/manage_subscriptions.php').setData(mb).send();}function ta(jb,kb){var lb=ca[kb]||[],mb=l.getItems(jb);mb.forEach(function(nb){if(j.hasClass(nb,'SubscriptionMenuCategory')){var ob=ua(nb);if(o(lb,ob)){wa(nb);}else xa(nb);}else if(j.hasClass(nb,'SubscriptionAppStory')){var pb=ua(nb);if(ja[kb]&&ja[kb][pb]){wa(nb);}else xa(nb);}});bb(jb,kb,ba[kb],false);}function ua(jb){var kb=k.scry(jb,'input')[0];return kb&&kb.value;}function va(jb){return k.find(jb,'a.itemAnchor');}function wa(jb){j.addClass(jb,'checked');va(jb).setAttribute('aria-checked',true);}function xa(jb){j.removeClass(jb,'checked');va(jb).setAttribute('aria-checked',false);}function ya(jb,kb,lb,mb,nb){if(lb){wa(kb);}else xa(kb);var ob=ua(kb);if(ma(ob)){lb&&za(jb,ob);}else if(lb){if(!o(ca[jb],ob))ca[jb].push(ob);}else{var pb=ca[jb].indexOf(ob);if(pb!==-1)ca[jb].splice(pb,1);}if(mb)sa(jb,ob,nb);}function za(jb,kb){ba[jb]=kb;h.inform('SubscriptionLevelUpdated',{profile_id:jb,level:kb});}function ab(jb,kb,lb,mb){var nb='/ajax/feed/filter_action/',ob=ua(kb),pb={actor_id:jb,app_id:ob};if(lb){wa(kb);nb+='resubscribe_user_app/';pb.action='resubscribe_user_app';if(!ja[jb])ja[jb]={};ja[jb][ob]=true;}else{xa(kb);nb+='unsubscribe_user_app_checkbox/';pb.action='unsubscribe_user_app_checkbox';if(ja[jb])ja[jb][ob]=false;}new i().setURI(nb).setData(pb).send();}function bb(jb,kb,lb,mb,nb){var ob=k.scry(jb,'.SubscriptionMenuLevel'),pb=null;ob.forEach(function(qb){if(ua(qb)==lb){pb=qb;}else if(l.isItemChecked(qb))ya(kb,qb,false,false);});pb&&ya(kb,pb,true,mb,nb);}function cb(jb,kb,lb){w[kb]=lb;j.conditionClass(jb,'isUnsubscribed',!lb);var mb=k.scry(jb,'li.SubscribeMenuSubscribeCheckbox');if(mb.length!==0){var nb=mb[0];if(lb){wa(nb);}else xa(nb);}}function db(jb,kb){j.conditionClass(jb,'subscriptionMenuOpen',kb);}function eb(jb,kb,lb){var mb=k.find(jb,".FriendListSubscriptionsMenu"),nb=k.find(mb,".uiMenuInner");if(ka!=null)ka.forEach(function(ob){nb.removeChild(ob);});lb.forEach(function(ob){nb.appendChild(ob);});ka=lb;}h.subscribe('UnfollowUser',function(jb,kb){if(da[kb.profile_id]){za(kb.profile_id,da[kb.profile_id]);ca[kb.profile_id]=ea[kb.profile_id].slice();}});h.subscribe('UpdateSubscriptionLevel',function(jb,kb){var lb=kb.profile_id+'',mb=kb.level+'';za(lb,mb);var nb;for(nb in u)if(u[nb]===lb){var ob=q(nb);ob&&bb(ob,lb,mb,false);}});function fb(jb,kb,lb){x[kb]=lb;var mb=z[kb]&&!la,nb=k.scry(jb,'li.SubscribeMenuNotifyMeCheckbox');if(nb.length!==0){var ob=nb[0];j.conditionShow(ob,!mb);j.conditionShow(k.find(jb,'li.SubscribeMenuNotifyMeCheckboxSeparator'),!mb);if(lb){wa(ob);}else xa(ob);}}function gb(jb,kb){var lb={profile_id:kb};h.inform('EnableNotifsForUser',lb);new i().setURI(ha).setMethod('POST').setData({notifier_id:kb,enable:true}).setErrorHandler(h.inform.curry('EnableNotifsForUserFail',lb)).send();}function hb(jb,kb){var lb={profile_id:kb};h.inform('DisableNotifsForUser',lb);new i().setURI(ha).setMethod('POST').setData({notifier_id:kb,enable:false}).setErrorHandler(h.inform.curry('DisableNotifsForUserFail',lb)).send();}var ib={init:function(jb,kb,lb){var mb=k.getID(jb);if(!u[mb])g.listen(jb,'click',function(nb){return na(jb,u[mb],lb,nb.getTarget());});if(lb===s&&ia[kb].length)eb(jb,kb,ia[kb]);if(ba[kb])ta(jb,kb);u[mb]=kb;j.conditionClass(jb,'NonFriendSubscriptionMenu',!v[kb]);j.conditionClass(jb,'cannotSubscribe',!y[kb]);j.conditionClass(jb,'noSubscriptionLevels',z[kb]&&!aa[kb]);j.conditionClass(jb,'noSubscribeCheckbox',!v[kb]&&!z[kb]);cb(jb,kb,w[kb]);fb(jb,kb,x[kb]);h.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],function(nb,ob){cb(jb,kb,true);}.bind(this));h.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],function(nb,ob){h.inform('SubMenu/Reset');cb(jb,kb,false);}.bind(this));h.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],function(nb,ob){fb(jb,kb,true);}.bind(this));h.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],function(nb,ob){fb(jb,kb,false);}.bind(this));h.subscribe('listeditor/friend_lists_changed',function(nb,ob){if(ob.notify_state){var pb=ob.added_uid?ob.added_uid:ob.removed_uid;fb(jb,pb,ob.notify_state.is_notified);}}.bind(this));db(jb,false);},getSubscriptions:function(jb){return {level:ba[jb],custom_categories:ca[jb]};},setSubscriptions:function(jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb){za(jb,pb+'');v[jb]=kb;w[jb]=lb;y[jb]=mb;z[jb]=nb;aa[jb]=ob;da[jb]=rb+'';ca[jb]=qb.map(String);ea[jb]=sb.map(String);ia[jb]=vb;x[jb]=tb;la=ub;}};e.exports=a.EditSubscriptions||ib;});
__d("DynamicFriendListEducation",["Event","Arbiter","AsyncRequest","Dialog","PageTransitions","arrayContains","createArrayFrom","removeFromArray"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Dialog'),k=b('PageTransitions'),l=b('arrayContains'),m=b('createArrayFrom'),n=b('removeFromArray'),o,p,q,r,s,t;function u(){q&&q.hide();r&&r.hide();}function v(y){n(p,y);u();s({accept_tag_education:true});}function w(){u();s({nux_cancel:true});}var x={init:function(y,z){o=y;p=m(z).map(String);k.registerHandler(function(){u();o=false;s=undefined;p=[];});},showDialog:function(y,z,aa){if(o&&l(p,y)){u();h.inform('DynamicFriendListEducation/dialogOpen',{uid:z,flid:y});s=aa;q=new j().setAsync(new i('/ajax/friends/lists/smart_list_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true)).setHandler(v.bind(this,y)).setCloseHandler(function(){h.inform('DynamicFriendListEducation/dialogClosed',{uid:z,flid:y});}).setCancelHandler(function(){h.inform('DynamicFriendListEducation/dialogCancel',{uid:z,flid:y});}).show();}else aa();},showContextualDialog:function(y,z,aa,ba){if(o&&l(p,y)){u();t=aa;s=ba;new i('/ajax/friends/lists/smart_list_contextual_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true).send();}else ba();},setContextualDialog:function(y,z,aa,ba){r=y;r.setContext(t);r.show();g.listen(z,'click',v.bind(this,ba));g.listen(aa,'click',w);}};e.exports=x;});
__d("FriendStatus",["function-extensions","Arbiter","AsyncRequest","arrayContains","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('arrayContains'),j=b('copyProperties'),k=b('createArrayFrom');function l(p,q,r){this.id=p;this.update(q,r);}j(l.prototype,{update:function(p,q){p&&(this.status=p);if(q){this.lists=k(q).map(String);this._informListChange();}},isComplete:function(){return !!this.lists;},addToList:function(p){if(this.lists&&!i(this.lists,p))this.lists.push(p);this._informListChange();},removeFromList:function(p){if(this.lists){var q=this.lists.indexOf(p);q!==-1&&this.lists.splice(q,1);}this._informListChange();},updateList:function(p,q){q?this.addToList(p):this.removeFromList(p);},_informListChange:function(){g.inform('FriendListMembershipChange',{uid:this.id,lists:this.lists});}});j(l,{ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4});var m={},n={};function o(p,q,r){if(!m[r.uid]){m[r.uid]=new l(r.uid,p);}else m[r.uid].update(p);g.inform('FriendRequest/change',{uid:r.uid,status:p});}g.subscribe(['FriendRequest/cancel','FriendRequest/unfriend','FriendRequest/sendFail'],o.curry(l.CAN_REQUEST));g.subscribe(['FriendRequest/confirmFail'],o.curry(l.INCOMING_REQUEST));g.subscribe(['FriendRequest/cancelFail','FriendRequest/sent','FriendRequest/sending'],o.curry(l.OUTGOING_REQUEST));g.subscribe(['FriendRequest/confirm','FriendRequest/confirming'],o.curry(l.ARE_FRIENDS));j(l,{CLOSE_FRIENDS:null,ACQUAINTANCES:null,getFriend:function(p,q){if(m[p]&&m[p].isComplete()){q(m[p]);}else if(n[p]){n[p].push(q);}else{n[p]=[q];new h().setURI("/ajax/friends/status.php").setData({friend:p}).setHandler(function(r){var s=r.getPayload();l.initFriend.bind(l,p,s.status,s.lists).defer();}).send();}},initFriend:function(p,q,r){var s=m[p]||new l(p);s.update(s.status||q,s.lists||r);m[p]=s;n[p]&&n[p].forEach(function(t){t(s);});n[p]=null;},setSpecialLists:function(p){l.CLOSE_FRIENDS=p.close+'';l.ACQUAINTANCES=p.acq+'';}});e.exports=l;});
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","$","arrayContains","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOMQuery'),k=b('DynamicFriendListEducation'),l=b('EditSubscriptions'),m=b('FriendStatus'),n=b('MenuDeprecated'),o=b('Parent'),p=b('ScrollableArea'),q=b('URI'),r=b('$'),s=b('arrayContains'),t=b('copyProperties'),u=b('ge'),v=5,w={},x='/ajax/profile/removefriendconfirm.php',y='/ajax/friends/requests/cancel.php',z='/ajax/choose/',aa='/profile.php',ba='/ajax/report/social.php',ca,da;function ea(pa,qa,ra){var sa=w[pa.id],ta=function(ua){var va={action:ra?'add_list':'del_list',to_friend:sa.id,friendlists:[qa],source:ca};if(ua)t(va,ua);sa.updateList(qa,ra);var wa;if(ra&&qa==m.CLOSE_FRIENDS){wa=ha(pa,m.ACQUAINTANCES);if(n.isItemChecked(wa)){n.toggleItem(wa);ea(pa,m.ACQUAINTANCES,false);}}else if(ra&&qa==m.ACQUAINTANCES){wa=ha(pa,m.CLOSE_FRIENDS);if(n.isItemChecked(wa)){n.toggleItem(wa);ea(pa,m.CLOSE_FRIENDS,false);}}var xa={flid:qa,uid:sa.id},ya=ra?'FriendListHovercard/add':'FriendListHovercard/remove';g.inform(ya,xa);new h().setURI('/ajax/add_friend/action.php').setData(va).send();};if(ra){k.showDialog(qa,sa.id,ta);}else ta();}function fa(pa){var qa=j.scry(pa,'input')[0];return qa&&qa.value;}function ga(pa,qa,ra){var sa={uid:qa.id};new h().setURI(y).setMethod('POST').setData({friend:qa.id}).setHandler(g.inform.bind(g,'FriendRequest/cancel',sa)).setErrorHandler(g.inform.bind(g,'FriendRequest/cancelFail',sa)).setStatusElement(ra).send();}function ha(pa,qa){var ra=n.getItems(pa);for(var sa=0;sa<ra.length;sa++)if(fa(ra[sa])==qa)return ra[sa];return null;}function ia(pa,qa){var ra=n.getItems(pa);ra.forEach(function(sa){var ta=fa(sa),ua=s(qa.lists,ta);if(n.isItemChecked(sa)!==ua)n.toggleItem(sa);});}function ja(pa){var qa=n.getItems(pa),ra=!i.hasClass(pa,'followButtonFlyout')&&!i.hasClass(pa,'likeButtonFlyout'),sa=[],ta=[],ua=0,va=0;qa.forEach(function(ab){if(i.hasClass(ab,'neverHide')){i.removeClass(ab,'underShowMore');ua++;}else if(n.isItemChecked(ab)){sa.push(ab);}else if(i.hasClass(ab,'neverShow')||i.hasClass(ab,'FriendListCreateTrigger')||(!ra&&i.hasClass(ab,'friendOptionsOnly'))){i.addClass(ab,'underShowMore');va++;}else ta.push(ab);});var wa=v-ua,xa=sa.concat(ta),ya=va;xa.forEach(function(ab){if(i.hasClass(ab,'ShowMoreItem')){wa--;return;}if(wa){i.removeClass(ab,'underShowMore');wa--;}else{i.addClass(ab,'underShowMore');ya=true;}});i.conditionClass(pa,'hasMoreFriendListItems',ya);var za=j.scry(pa,'.FriendListMenuShowMore');za.forEach(function(ab){i.removeClass(ab,'FriendListMenuShowMore');});}function ka(pa,qa){i.conditionClass(pa,'FriendListMemorializedUser',qa);}function la(pa,qa){i.conditionClass(pa,'FriendListCannotSuggestFriends',!qa);}function ma(pa,qa){var ra=j.scry(pa,'.FriendListUnfriend')[0],sa=j.scry(pa,'.FriendListCancel')[0],ta=j.scry(pa,'.FriendListSuggestFriends')[0],ua=j.scry(pa,'.FriendListFriendship')[0],va=j.scry(pa,'.FriendListReportBlock')[0];if(sa)i.conditionShow(sa,qa.status==m.OUTGOING_REQUEST);if(ra){i.conditionShow(ra,qa.status==m.ARE_FRIENDS);var wa=da==='bd_friends_tab',xa=j.find(ra,'a');xa.setAttribute('rel',wa?'async-post':'dialog-post');xa.setAttribute('ajaxify',q(x).addQueryData({uid:qa.id,unref:da,no_confirm:wa}).toString());}else i.conditionClass(pa,'NoFriendListActionSeparator',!sa||qa.status!=m.OUTGOING_REQUEST);if(ta)j.find(ta,'a').setAttribute('href',q(z).addQueryData({type:'suggest_friends',newcomer:qa.id,ref:'profile_others_dropdown'}).toString());if(ua){i.conditionShow(ua,qa.status==m.ARE_FRIENDS);j.find(ua,'a').setAttribute('href',q(aa).addQueryData({and:qa.id}).toString());}if(va)j.find(va,'a').setAttribute('ajaxify',q(ba).addQueryData({content_type:0,cid:qa.id,rid:qa.id}).toString());}function na(pa,qa){var ra=j.scry(pa,'div.FriendListSubscriptionsMenu');if(ra.length!==0)l.init(pa,qa,45);}g.subscribe('FriendRequest/change',function(pa,qa){for(var ra in w){var sa=u(ra),ta=w[ra];if(sa&&ta&&ta.id==qa.uid){ia(sa,ta);ma(sa,ta);ja(sa);}}});n.subscribe('select',function(pa,qa){if(i.hasClass(qa.item,'ShowMoreItem')&&i.hasClass(qa.menu,'FriendListMenu')){i.addClass(qa.menu,'FriendListMenuShowMore');p.poke(qa.item);}});var oa={init:function(pa,qa,ra,sa,ta,ua){pa=r(pa);ca=ra;da=ua;if(!w[pa.id])n.subscribe('select',function(va,wa){if(j.contains(pa,wa.item))if(o.byClass(wa.item,'FriendListItem')){n.toggleItem(wa.item);var xa=fa(wa.item);ea(pa,xa,n.isItemChecked(wa.item));}else if(o.byClass(wa.item,'FriendListCancel')){ga(pa,w[pa.id],wa.item);}else if(o.byClass(wa.item,'FriendListUnfriend'))g.inform('FriendEditLists/unfriend');});i.addClass(pa,'async_saving');m.getFriend(qa,function(va){ka(pa,sa);la(pa,ta);ia(pa,va);ma(pa,va);w[pa.id]=va;ja(pa);na(pa,qa);i.removeClass(pa,'async_saving');}.bind(this));}};e.exports=a.FriendEditLists||oa;});
__d("FriendListFlyoutController",["Event","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","Dialog","DOM","DOMQuery","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent","cx","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Button'),k=b('ContextualLayer'),l=b('CSS'),m=b('DataStore'),n=b('Dialog'),o=b('DOM'),p=b('DOMQuery'),q=b('FriendEditLists'),r=b('FriendStatus'),s=b('Keys'),t=b('Layer'),u=b('LayerHideOnEscape'),v=b('LayerTabIsolation'),w=b('MenuDeprecated'),x=b('Parent'),y=b('ScrollableArea'),z=b('Style'),aa=b('TabbableElements'),ba=b('UserAgent'),ca=b('cx'),da=b('emptyFunction'),ea,fa,ga=null,ha=null,ia,ja,ka,la,ma,na,oa=1500,pa={init:function(pb){pa.init=da;ea=pb;ea.subscribe('mouseenter',ya);ea.subscribe('mouseleave',kb);ea.subscribe('hide',za);ea.enableBehavior(v);ea.enableBehavior(u);if(ga)o.setContent(ea.getContent(),[ga,ha]);var qb=function(rb){var sb=x.byClass(rb.getTarget(),'enableFriendListFlyout');if(sb)if(ia===sb){clearTimeout(la);}else{fa&&mb();jb(sb);}};g.listen(document.documentElement,{mouseover:qb,click:qb,keydown:function(event){var rb=event.getTarget();if(event.getModifiers().any)return;if(!fa||p.isNodeOfType(rb,['input','textarea']))return;var sb=g.getKeyCode(event),tb;switch(sb){case s.UP:case s.DOWN:var ub=xa();tb=va(ub);ta(ub[tb+(sb===s.UP?-1:1)]);return false;case s.SPACE:var vb=ua(rb);if(vb){qa(vb);event.prevent();}break;default:var wb=String.fromCharCode(sb).toLowerCase(),xb=xa();tb=va(xb);var yb=tb,zb=xb.length;while((~tb&&(yb=++yb%zb)!==tb)||(!~tb&&++yb<zb)){var ac=w.getItemLabel(xb[yb]);if(ac&&ac.charAt(0).toLowerCase()===wb){ta(xb[yb]);return false;}}}}});h.subscribe('FriendEditLists/unfriend',mb);h.subscribe('DynamicFriendListEducation/dialogOpen',function(){na=true;});h.subscribe('DynamicFriendListEducation/dialogClosed',function(){na=false;kb();});},initContent:function(pb){o.appendContent(document.body,pb);ab(pb);(function(){if(!ga){ga=pb;ea&&o.setContent(ea.getContent(),[ga,ha]);l.show(ga);g.listen(ga,'click',nb);fa&&gb(ia);}else{o.remove(pb);pb=null;}}).defer();},initNux:function(pb){if(ha)return;ha=pb;ea&&o.setContent(ea.getContent(),[ga,ha]);},show:function(pb){hb(pb);},hide:function(pb){pb===false?mb():kb();},setActiveNode:function(pb){fa&&mb();ia=pb;ja=g.listen(pb,'mouseleave',function(){ia=null;ja&&ja.remove();});},setCloseListener:function(pb,qb){m.set(pb,'flfcloselistener',qb);if(ia!=pb)m.set(pb,'flfcloselistenertimeout',ob.curry(pb).defer(oa));},setCloseListenerTimeout:function(pb){oa=pb;}};function qa(pb){ba.firefox()&&sa(pb).blur();w.inform('select',{menu:ra(pb),item:pb});}function ra(pb){if(l.hasClass(pb,'uiMenuContainer'))return pb;return x.byClass(pb,'uiMenu');}function sa(pb){return p.find(pb,'a.itemAnchor');}function ta(pb){if(pb&&wa(pb)){w._removeSelected(ea.getContent());l.addClass(pb,'selected');sa(pb).focus();}}function ua(pb){return x.byClass(pb,'uiMenuItem');}function va(pb){if(document.activeElement){var qb=ua(document.activeElement);return pb.indexOf(qb);}return -1;}function wa(pb){return !l.hasClass(pb,'disabled')&&z.get(pb,'display')!=='none'&&z.get(x.byClass(pb,'uiMenu'),'display')!=='none';}function xa(){return w.getItems(ea.getContent()).filter(wa);}function ya(){clearTimeout(la);}function za(){if(ia){l.removeClass(ia,"_52nd");if(l.hasClass(ia,'uiButton')||l.hasClass(ia,"_42fu"))l.removeClass(ia,'selected');if(m.get(ia,'flfcloselistener')){var pb=ia;m.set(ia,'flfcloselistenertimeout',ob.curry(pb).defer(oa));}}fa=false;fb();ia=null;}function ab(pb){var qb=p.scry(pb,'[tabindex="0"]');qb.forEach(function(rb){rb.tabIndex='-1';});qb[0]&&(qb[0].tabIndex='0');}function bb(pb){if(p.isNodeOfType(pb,'label')&&l.hasClass(pb,'uiButton'))pb=j.getInputElement(pb);return pb;}function cb(pb){return m.get(bb(pb),'profileid');}function db(pb){return m.get(bb(pb),'memorialized')==='true';}function eb(pb){return m.get(bb(pb),'cansuggestfriends')==='true';}function fb(){ja&&ja.remove();ja=null;ma&&t.unsubscribe(ma);ma=null;la&&clearTimeout(la);la=null;}function gb(pb){var qb=cb(pb),rb=db(pb),sb=eb(pb),tb=m.get(pb,'flloc'),ub=m.get(pb,'unref');q.init(ga,qb,tb,rb,sb,ub);l.conditionClass(ga,'followButtonFlyout',l.hasClass(pb,'profileFollowButton'));l.conditionClass(ga,'friendButtonFlyout',l.hasClass(pb,'FriendRequestFriends')||l.hasClass(pb,'FriendRequestIncoming')||l.hasClass(pb,'FriendRequestOutgoing'));l.conditionClass(ga,'likeButtonFlyout',l.hasClass(pb,'profileLikeButton'));var vb=p.scry(ga,'div.uiScrollableArea')[0];vb&&y.poke(vb);var wb=aa.find(ga)[0];wb&&wb.focus();}function hb(pb){if(!ea||fa)return;ea.setContext(pb);ea.setCausalElement(pb);pb.setAttribute('aria-expanded','true');l.addClass(pb,"_52nd");if(l.hasClass(pb,'uiButton')||l.hasClass(pb,"_42fu"))l.addClass(pb,'selected');ea.show();ia=pb;fa=true;if(ga){gb(pb);}else new i().setURI('/ajax/friends/lists/flyout_content.php').setStatusElement(ea.getContent()).send();fb();ja=g.listen(pb,'mouseleave',kb);ma=t.subscribe('show',ib);if(m.get(pb,'flfcloselistener'))clearTimeout(m.remove(pb,'flfcloselistenertimeout'));var qb=cb(pb);r.getFriend(qb,function(rb){if(!ha)return;if(rb.status==r.OUTGOING_REQUEST){l.show(ha);i.bootstrap('/ajax/friends/lists/nux_flyout.php',null,true);}else l.hide(ha);});}function ib(pb,qb){if(!(qb instanceof k)||!p.contains(ia,qb.getContext()))kb();}function jb(pb){ia=pb;ka=hb.curry(pb).defer(350);ja=g.listen(pb,'mouseleave',function(){clearTimeout(ka);ia=null;ja&&ja.remove();});}function kb(){la=mb.defer(150);}function lb(){var pb=n.getCurrent(),qb=pb&&pb.getBody();return !!(qb&&p.scry(qb,'.friendListDialogTourCarousel')[0]);}function mb(){if(na||lb())return;ba.ie()<8&&document.documentElement.focus();if(ea){ea.hide();var pb=ea.getCausalElement();pb&&pb.setAttribute('aria-expanded','false');}}function nb(event){var pb=x.byTag(event.getTarget(),'a');if(pb&&l.hasClass(pb,'FriendListActionItem'))kb();}function ob(pb){var qb=m.remove(pb,'flfcloselistener');qb&&qb();}e.exports=a.FriendListFlyoutController||pa;});
__d("AddFriendButton",["Event","Animation","Arbiter","AsyncRequest","AsyncResponse","collectDataAttributes","CSS","DOMQuery","FriendListFlyoutController","FriendStatus","ge","goURI","Style","URI"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('AsyncResponse'),l=b('collectDataAttributes'),m=b('CSS'),n=b('DOMQuery'),o=b('FriendListFlyoutController'),p=b('FriendStatus'),q=b('ge'),r=b('goURI'),s=b('Style'),t=b('URI'),u={ERROR_ALREADY_ADDED:1431005,init:function(v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=v.id,ha=null,ia=n.scry(v,'.addButton')[0],ja=n.scry(v,'.addFriendText')[0],ka=n.scry(v,'.outgoingButton')[0],la=n.scry(v,'.incomingButton')[0],ma=n.scry(v,'.friendButton')[0];function na(ta,ua,va){var wa=new t(ia.getAttribute('ajaxify')),xa=l(v,['ft','gt']);new j().setURI(aa).setData({to_friend:w,action:ta,how_found:y,ref_param:z,link_data:xa,outgoing_id:ka.id,xids:wa.getQueryData().xids,logging_location:ba,no_flyout_on_click:ca,ego_log_data:da,http_referer:fa}).setErrorHandler(ua).setServerDialogCancelHandler(va).setRelativeTo(ka).send();}function oa(ta,ua){if(ja){m.hide(ja);}else if(ia)m.hide(ia);ka&&m.hide(ka);la&&m.hide(la);ma&&m.hide(ma);if(ta)m.show(ta);if('Outgoing'==ua&&ha!=ua&&ea)new h(ta).from('backgroundColor','#FFF8CC').to('backgroundColor','transparent').from('borderColor','#FFE222').to('borderColor',s.get(ta,'borderLeftColor')).duration(2000).go();ha&&m.removeClass(v,'fStatus'+ha);ha=ua;m.addClass(v,'fStatus'+ua);}function pa(ta){if(m.hasClass(ta,'enableFriendListFlyout')){o.show(ta);}else o.hide();}var qa=i.subscribe('FriendRequest/change',function(ta,ua){sa();if(ua.uid!=w)return;switch(ua.status){case p.ARE_FRIENDS:return oa(ma,'Friends');case p.INCOMING_REQUEST:return oa(la,'Incoming');case p.OUTGOING_REQUEST:return oa(ka,'Outgoing');case p.CAN_REQUEST:return oa(ja?ja:ia,'Requestable');}}),ra;if(x)ra=i.subscribe('FriendRequest/confirm',function(ta,ua){sa();ua.uid==w&&r(x);});ia&&g.listen(ia,'click',function(){i.inform('FriendRequest/sending',{uid:w});if(ca){o.setActiveNode(ka);}else pa(ka);na("add_friend",function(ta){var ua=ta.error==u.ERROR_ALREADY_ADDED?'FriendRequest/sent':'FriendRequest/sendFail';i.inform(ua,{uid:w});o.hide();k.defaultErrorHandler(ta);},function(ta){i.inform('FriendRequest/sendFail',{uid:w});o.hide();});});function sa(){if(q(ga))return;qa&&qa.unsubscribe();ra&&ra.unsubscribe();qa=ra=null;}}};e.exports=u;});
__d("legacy:FriendStatus",["FriendStatus"],function(a,b,c,d){a.FriendStatus=b('FriendStatus');},3);
__d("FriendButtonIcon",["Arbiter","FriendStatus","Button","arrayContains"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('FriendStatus'),i=b('Button'),j=b('arrayContains');e.exports={register:function(k,l,m){g.subscribe('FriendListMembershipChange',function(n,o){if(o.uid==m){var p=j(o.lists,h.CLOSE_FRIENDS),q=j(o.lists,h.ACQUAINTANCES);if(p&&!q){i.setIcon(k,l.close);}else if(q&&!p){i.setIcon(k,l.acquaintance);}else i.setIcon(k,l.friend);}});}};});
__d("PopoverMenuShowOnHover",["Event","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('copyProperties');function i(j){this._popoverMenu=j;this._listeners=[];}h(i.prototype,{enable:function(){this._attachMouseListeners(this._popoverMenu.getTriggerElem());this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',this._onSetMenu.bind(this));},disable:function(){while(this._listeners.length)this._listeners.pop().remove();if(this._setMenuSubscription){this._setMenuSubscription.unsubscribe();this._setMenuSubscription=null;}},_onSetMenu:function(){this._attachMouseListeners(this._popoverMenu.getMenu().getRoot());},_attachMouseListeners:function(j){var k=this._popoverMenu.getPopover();this._listeners.push(g.listen(j,'mouseenter',k.showLayer.bind(k)),g.listen(j,'mouseleave',k.hideLayer.bind(k)));}});e.exports=i;});
__d("TriggerablePageletLoader",["function-extensions","CSS","Event","OnVisible","Run","UIPagelet","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('CSS'),h=b('Event'),i=b('OnVisible'),j=b('Run'),k=b('UIPagelet'),l=b('copyProperties'),m=[];function n(p){if(!m[p])return;m[p].__trigger&&m[p].__trigger.remove();delete m[p];}function o(p,q){this._disabledTriggerKeys=[];this._pageletConfig=p;this._loaded=false;this._loading=false;this._triggerKeys=[];if(q)q.forEach(this.addTrigger.bind(this));j.onLeave(this.destroy.bind(this));}l(o,{removeTrigger:function(p){for(var q in m)if(m[q]&&m[q].node===p)n(q);},TRIGGER_CLICK:'click',TRIGGER_ONVISIBLE:'onvisible',TRIGGER_NOW:'now'});l(o.prototype,{addTrigger:function(p){p.__trigger=this._createTrigger(p);m.push(p);this._triggerKeys.push(m.length-1);},destroy:function(){this.removeTriggers();if(this._pageletRequest){this._pageletRequest.cancel();this._pageletRequest=null;this._loading=false;this._loaded=false;}},disableTriggers:function(){this._triggerKeys.forEach(function(p){if(m[p]){m[p].__trigger.remove();this._disabledTriggerKeys.push(p);}}.bind(this));},enableTriggers:function(){if(this._loaded||this._loading)return;this._disabledTriggerKeys.forEach(function(p){if(m[p])m[p].__trigger=this._createTrigger(m[p]);}.bind(this));this._disabledTriggerKeys.length=0;},_createTrigger:function(p){if(this._loaded||this._loading)return;var q=this.onTrigger.bind(this,p);switch(p.type){case o.TRIGGER_CLICK:return h.listen(p.node,'click',function(r){r.prevent();q();});case o.TRIGGER_ONVISIBLE:return new i(p.node,q,p.onVisibleStrict,p.onVisibleBuffer);case o.TRIGGER_NOW:return q();default:}},load:function(p){if(this._loaded||this._loading)return;this._loading=true;this._loaded=false;g.addClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.addClass(p.node,'async_saving');var q=this._pageletConfig.options||{};q.displayCallback=this.onLoad.bind(this,p);if(q.crossPage===undefined)q.crossPage=true;this._pageletRequest=k.loadFromEndpoint(this._pageletConfig.controller,this._pageletConfig.node,this._pageletConfig.data,q);},onLoad:function(p,q){this._loaded=true;this._pageletRequest=null;g.removeClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.removeClass(p.node,'async_saving');if(this._pageletConfig.displayCallback){this._pageletConfig.displayCallback(q);}else q();},onTrigger:function(p){p.callback&&p.callback(p);if(!this._loaded&&!this._loading)this.load(p);},removeTriggers:function(p){this._triggerKeys.forEach(function(q){if(m[q]&&(!p||m[q].type===p))n(q);});}});e.exports=o;});
__d("OGCollectionAddMenu",["AsyncRequest","CSS","DataStore","DOM","DOMQuery","Event","Form","MenuDeprecated","TidyArbiterMixin","URI","copyProperties","csx","cx","tidyEvent","collectDataAttributes"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('DOMQuery'),l=b('Event'),m=b('Form'),n=b('MenuDeprecated'),o=b('TidyArbiterMixin'),p=b('URI'),q=b('copyProperties'),r=b('csx'),s=b('cx'),t=b('tidyEvent'),u=b('collectDataAttributes'),v='OGCollectionAddMenu';function w(x,y,z,aa,ba,ca,da){var ea=y;this._image=y;this._container=z;this._endpoint=p(da);this._placeholder=aa;this._surface=ba;this._showPlaceholder=ca;this._ratingsControl=j.scry(this._container.parentNode,"._5580")[0];w.inform('addButton',{button:ea,root:this._container});t(l.listen(this._container,'click',function(fa){if(this._dialog&&this._dialog.isShown())fa.kill();}.bind(this)));if(h.hasClass(this._image,"_52uz"))t(l.listen(this._container,'mouseenter',l.fire.curry(this._container,'click')));i.set(String(x),v,this);}q(w,o,{loadDialog:function(x,y){var z=i.get(String(x),v);z.init(y);}});q(w.prototype,o,{init:function(x){this._dialog=x;this._dialog.setContext(this._image);this._dialog.show();this._audienceSelector=k.find(this._dialog.getContent(),'.audienceSelector');h.addClass(this._image,'openToggler');w.inform('menuOpened',{audienceSelector:this._audienceSelector.parentNode});this._menu=k.find(this._dialog.getContent(),"._4-jt");n.register(this._menu);this._menuSubscriptionToken=n.subscribe('select',this._onMenuClick.bind(this));t([x.subscribe('hide',this._onDialogHide.bind(this))]);},destroy:function(){j.remove(this._container);this._dialog.hide();this._placeholder.destroy();},hide:function(){h.hide(this._container);this._placeholder.hide();},getParent:function(){return this._container.parentNode;},insertMenuIntoDialog:function(x){this._placeholder.insertIntoDialog(x);},_onDialogHide:function(){h.removeClass(this._image,'openToggler');n.unsubscribe(this._menuSubscriptionToken);},_onMenuClick:function(x,y){if(y.menu!==this._menu)return;var z=y.item,aa=k.find(z,"._5581"),ba=aa.getAttribute('value'),ca=k.find(z,"._5582"),da=this._ratingsControl&&ca.getAttribute('value');this._submitRequest(ba,da);},_submitRequest:function(x,y){this._endpoint.addQueryData({collection_token:x});this.inform('addedToCollection',x);this._dialog.hide();h.hide(this._image);if(y){h.show(this._ratingsControl);l.fire(this._ratingsControl.parentNode,'click');}else if(this._showPlaceholder)h.show(this._placeholder.getIcon());this._request=new g(this._endpoint).setData(q(m.serialize(this._audienceSelector),{action:'add',show_added_icon:this._showPlaceholder,surface:this._surface},u(this._container,['ft']))).setHandler(function(){if(!this._showPlaceholder&&!y)this.inform('reload');}.bind(this)).setErrorHandler(function(){this._reset();this.inform('addedToCollectionFailed');}.bind(this));this._request.send();}});e.exports=w;});
__d("MedleyPageletRequestData",["Arbiter","TidyArbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('TidyArbiter'),i={},j={get:function(){return i;},set:function(k){i=k;h.inform('Medley/requestDataSet',null,g.BEHAVIOR_STATE);}};e.exports=j;});
__d("TimelineDynamicSection",["Class","DOM","TimelineSection","copyProperties","cx","ge","TimelineDynamicSectionConfig"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DOM'),i=b('TimelineSection'),j=b('copyProperties'),k=b('cx'),l=b('ge'),m=b('TimelineDynamicSectionConfig');function n(o,p,q){this._controller=p;this._data=null;this._node=null;this._triggerLoader=null;this.parent.construct(this,o,o,q);}g.extend(n,i);j(n.prototype,{_createNode:function(){return h.create('div',{className:"_30f",id:this.nodeID},[m.throbber.cloneNode(true)]);},getNode:function(){if(!this._node)this._node=l(this.nodeID)||this._createNode();return this._node;}});e.exports=n;});
__d("TimelineAppCollection",["function-extensions","Class","CSS","DOM","DOMQuery","Event","MedleyPageletRequestData","NumberFormatConfig","PageTransitions","Style","TidyArbiter","TidyArbiterMixin","TimelineDynamicSection","TimelineSection","TriggerablePageletLoader","TimelineDynamicSectionConfig","copyProperties","csx","cx","ads-lib-formatters","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Class'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('Event'),l=b('MedleyPageletRequestData'),m=b('NumberFormatConfig'),n=b('PageTransitions'),o=b('Style'),p=b('TidyArbiter'),q=b('TidyArbiterMixin'),r=b('TimelineDynamicSection'),s=b('TimelineSection'),t=b('TriggerablePageletLoader'),u=b('TimelineDynamicSectionConfig'),v=b('copyProperties'),w=b('csx'),x=b('cx'),y=b('ads-lib-formatters'),z=b('ge'),aa=500,ba=8;function ca(ga){var ha=z(fa.getIDByToken(ga));if(!ha)return;return i.scry(ha,"._620")[0];}function da(ga){var ha=ga._parentSection,ia=ha._parentSection;s.setActiveSectionID(ha.id);ha.setActiveCollection(ga);if(ha._sk===ia._sk){if(!h.hasClass(ia.getNode(),"_c4f")){h.addClass(ia.getNode(),"_c4f");ia.freezeChildren();}ga._isFullyLoaded&&ia.addSectionTeasers();}if(!ia.isMedleyView()&&ha._sk===ia._sk){var ja=n.getCurrentURI();ja.addQueryData({collection_token:ga._token});ja.removeQueryData(['next_cursor']);n.rewriteCurrentURI(n.getCurrentURI().getUnqualifiedURI(),ja);}}function ea(ga,ha){ha.data.overview=ga._parentSection._sk!==ga._parentSection._parentSection._sk;da(ga);}function fa(ga,ha,ia,ja){this._contentLoader=null;this._isFrozen=false;this._isFullyLoaded=false;this._cursor=0;this._tabNode=ia;this._tabCount=ja>0?ja:0;this._token=ga;this._ftid=null;this.auxContent=null;this.curationContent=null;this.refreshCount();this.parent.construct(this,fa.getIDByToken(ga),ha);if(!ia)return;if(z(this.nodeID)){k.listen(ia,'click',da.curry(this));}else this.createTriggerLoader.bind(this).defer();}g.extend(fa,r);v(fa,q,{NEW_ITEM:'TimelineAppCollection/newItem',addPlaceholderToCollection:function(ga,ha,ia){ia=typeof ia!=='undefined'?ia:{};if(!ia.suppressCount&&!ia.previewPlaceholder)this.incrementCount(fa.getIDByToken(ga));s.callWithSection(fa.getIDByToken(ga),function(ja){var ka=ca(ga);if(!ia.previewPlaceholder&&ja.previewPlaceholder){ja.previewPlaceholder=null;if(ka.children.length>=1)h.removeClass(ka.children[0],"_5395");return;}var la=i.scry(ha,"._gx7")[0].cloneNode(true),ma=i.scry(ha,"._gx8 .img")[0],na=i.scry(ha,"._3owb")[0],oa=na&&na.getAttribute('data-obj');if(!la||!oa||!ka)return;if(ia.previewPlaceholder){if(ja.previewPlaceholder==oa)return;if(ja.previewPlaceholder)ja.removePlaceholder();ja.previewPlaceholder=oa;}var pa=i.scry(ka,'[data-obj="'+oa+'"]')[0],qa=i.create('div',{className:"_4-he"});if(ma)o.set(qa,'background-image','url('+ma.src+')');var ra=i.create('div',{className:"_gx8"},[qa]),sa=i.create('div',{className:"_gx6"},[la]),ta=i.create('div',{className:"_3owb"},[ra,sa]),ua=i.create('li',{className:"_5rz",id:'collectionItemPlaceholder'+oa},[ta]);h.conditionClass(ua,"_5395",ia.previewPlaceholder);if(pa&&ia.replaceExistingElement){i.replace(pa.parentNode,ua);}else{if(pa){i.remove(pa.parentNode);}else if(ja.isOverview()&&ka.children.length>=ba)h.addClass(ka.children[ba-1],"_51k9");i.prependContent(ka,ua);}});},addItemToCollection:function(ga,ha,ia){var ja=z(ia);if(!ja)return;var ka=i.scry(ja,"._620")[0],la=ka.parentNode.nextSibling;if(la&&h.hasClass(la,"_3t3"))i.remove(ka.lastChild);this.inform(fa.NEW_ITEM,{grid:ka,newItem:ga});var ma=z('collectionItemPlaceholder'+ha);if(ma){i.replace(ma,ga);return;}i.prependContent(ka,ga);},createFromArray:function(ga){return ga.map(function(ha){return new fa(ha.token,ha.controller,ha.tab_node,ha.tab_count);});},decrementCount:function(ga){s.callWithSection(ga,function(ha){if(ha._tabCount>0){ha._tabCount--;ha.refreshCount();ha.flashCountIf();}});},enableContentLoader:function(ga,ha,ia){s.callWithSection(ga,function(ja){ja.addContentLoader(ha,ia);});},getIDByToken:function(ga){return 'pagelet_timeline_app_collection_'+ga;},incrementCount:function(ga){s.callWithSection(ga,function(ha){ha._tabCount++;ha.refreshCount();ha.flashCountIf();});},registerAuxContent:function(ga,ha){s.callWithSection(ga,function(ia){ia.registerAuxContent(ha);});},registerAddCurationContent:function(ga,ha,ia){s.callWithSection(ga,function(ja){ja.registerAddCurationContent(ha,ia);});},removePlaceholderFromCollection:function(ga){s.callWithSection(fa.getIDByToken(ga),function(ha){ha.removePlaceholder();});},setLoaded:function(ga){s.callWithSection(ga,function(ha){ha.setIsLoaded(true);ha._parentSection.inform('loaded',ha);ha._parentSection.unsetMinHeight();});},setFullyLoaded:function(ga){s.callWithSection(ga,function(ha){ha._isFullyLoaded=true;var ia=ha._parentSection;ia._sk===ia._parentSection._sk&&ia._parentSection.addSectionTeasers();});},setFTID:function(ga,ha){s.callWithSection(ga,function(ia){ia.setFTID(ha);});}});v(fa.prototype,{addContentLoader:function(ga,ha){this._cursor=ha;p.subscribe('Medley/requestDataSet',function(){var ia={node:ga};if(h.hasClass(ga,"_3t3")){ia.type=t.TRIGGER_CLICK;}else if(this._isFrozen){i.remove(ga);ia.node=u.pager.cloneNode(true);i.appendContent(this.getNode(),ia.node);ia.type=t.TRIGGER_CLICK;}else{ia.onVisibleBuffer=aa;ia.onVisibleStrict=true;ia.type=t.TRIGGER_ONVISIBLE;}if(ia.type===t.TRIGGER_CLICK)ia.callback=s.setActiveSectionID.curry(this.id);var ja=v({displayCallback:function(ka){i.remove(ia.node);ka();},options:{append:true}},this.getDefaultPageletConfig());ja.data.overview=false;this._triggerLoader=null;this._contentLoader=new t(ja,[ia]);}.bind(this));},_createNode:function(){var ga=this.parent._createNode();ga.setAttribute('aria-role','tabpanel');return ga;},createTriggerLoader:function(){p.subscribe('Medley/requestDataSet',function(){var ga=this.getDefaultPageletConfig(),ha={callback:ea.curry(this,ga),node:this._tabNode,type:t.TRIGGER_CLICK};this._triggerLoader=new t(ga,[ha]);}.bind(this));},disableContentLoader:function(){this._contentLoader&&this._contentLoader.disableTriggers();},enableContentLoader:function(){var ga=this._triggerLoader||this._contentLoader;ga&&ga.enableTriggers();},freeze:function(){this._isFrozen=true;if(!this._contentLoader||this._contentLoader._loading)return;this._contentLoader.removeTriggers(t.TRIGGER_ONVISIBLE);var ga=j.scry(this.getNode(),"._3t3");if(!ga.length){var ha=j.scry(this.getNode(),"._359")[0];ha.length&&this.addContentLoader(ha,this._cursor);}},getCount:function(){return this._tabCount;},getDefaultPageletConfig:function(){return {controller:this._controller,data:v({collection_token:this._token,cursor:this._cursor},l.get(),{ftid:this._ftid},{sk:this._parentSection._sk}),node:this.getNode()};},getMedleySiteKey:function(){return this._parentSection._parentSection._sk;},flashCountIf:function(){if(this._parentSection.getActiveCollection()!=this){h.addClass(this._tabNode,"_4-k9");setTimeout(h.removeClass.curry(this._tabNode,"_4-k9"),800);}},isOverview:function(){return this._parentSection._sk!=this._parentSection._parentSection._sk;},registerAuxContent:function(ga){this.auxContent=ga;if(ga.nodeType==11)this.auxContent=i.create('span',null,ga);if(this._parentSection._activeCollection!==this)h.hide(this.auxContent);this._parentSection.addAuxContent(this.auxContent);},registerAddCurationContent:function(ga,ha){this.curationContent=(ga.nodeType==11)?i.create('span',null,ga):ga;this.curationContentOpen=ha;this._parentSection.addCurationContent(this.curationContent,this);},refreshCount:function(){if(!this._tabNode)return;var ga=j.find(this._tabNode,"._3d0");if(this._tabCount>0){i.setContent(ga,y.formatNumber(this._tabCount,0,m.numberDelimiter,''));}else i.setContent(ga,'');},removePlaceholder:function(){if(!this.previewPlaceholder)return;var ga=ca(this._token);if(!ga)return;this.previewPlaceholder=null;i.remove(ga.children[0]);if(this.isOverview&&ga.children.length>=ba)h.removeClass(ga.children[ba-1],"_51k9");},setFTID:function(ga){this._ftid=ga;},thaw:function(){this._isFrozen=false;},getToken:function(){return this._token;}});e.exports=fa;});
__d("TimelineAppSectionCuration",["Animation","Arbiter","CSS","DOM","Ease","Event","OnVisible","Style","TidyArbiterMixin","copyProperties","cx","queryThenMutateDOM","tidyEvent"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('Ease'),l=b('Event'),m=b('OnVisible'),n=b('Style'),o=b('TidyArbiterMixin'),p=b('copyProperties'),q=b('cx'),r=b('queryThenMutateDOM'),s=b('tidyEvent'),t=0,u={},v={};function w(y,z){var aa,ba;r(function(){ba=y.offsetHeight;aa=z===x.SHOW_STATE?y.firstChild.offsetHeight:0;},function(){n.set(y,'height',ba+'px');n.set(y,'overflow','hidden');aa&&i.addClass(y.parentNode,"_52bu");m.checkBuffer.defer();var ca=j.getID(y);v[ca]&&v[ca].stop();v[ca]=new g(y).to('height',aa).ondone(function(){delete v[ca];if(aa){n.set(y,'height','');n.set(y,'overflow','');}!aa&&i.removeClass(y.parentNode,"_52bu");h.inform('reflow');}).duration(Math.abs(aa-ba)*1.5).ease(k.sineOut).go();});}var x=p({addSection:function(y,z,aa,ba){u[y]={buttonShow:z,buttonHide:aa,content:ba,id:y,state:x.HIDE_STATE};n.set(ba,'height','0px');n.set(ba,'overflow','hidden');i.show(ba);s([l.listen(aa,'click',x.informState.curry(x.HIDE_STATE,y)),l.listen(z,'click',x.informState.curry(x.SHOW_STATE,y))]);x.register(y,function(ca,da){new m(ba,w.curry(ba,ca),true,t);i.toggle(aa);i.toggle(z);});},informState:function(y,z){if(u[z]&&u[z].state!==y){u[z].state=y;x.inform(y,u[z]);}},register:function(y,z){var aa=x.subscribe([x.HIDE_STATE,x.SHOW_STATE],function(ba,ca){if(ca.id===y)z(ba,ca,aa);});},getSectionState:function(y){if(u[y])return u[y].state;},SHOW_STATE:'show',HIDE_STATE:'hide'},o);e.exports=x;});
__d("TimelineMonitor",["Arbiter","Event","Run","Vector","ViewportBounds","ge","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Event'),i=b('Run'),j=b('Vector'),k=b('ViewportBounds'),l=b('ge'),m=b('queryThenMutateDOM'),n={},o={},p=0,q=[],r=null,s=false;function t(){n={};o={};p=0;q.length=0;r&&r.remove();r=null;s=false;}function u(){if(!r)r=h.listen(window,'scroll',z);if(!s){i.onLeave(t);s=true;}z();}var v=[],w=[];function x(){q.forEach(function(ea){var fa=aa.getSection(ea);if(fa&&fa!==o[ea.id]){o[ea.id]=fa;v.push({section:fa});}});var ba=k.getTop()+j.getScrollPosition().y;for(var ca in n){var da=n[ca];if((ba>=da.boundary&&p<=da.boundary)||(ba<=da.boundary&&p>=da.boundary)){n[ca].fromAbove=p<ba;w.push(n[ca]);}}p=ba;}function y(){v.forEach(function(ba){g.inform(aa.SECTION_CHANGE,ba);});w.forEach(function(ba){g.inform(aa.BOUNDARY_PASSED,ba);});v.length=0;w.length=0;}function z(){m(x,y,'TimelineMonitor/scroll');}var aa={BOUNDARY_PASSED:'TimelineMonitor/boundary',SECTION_CHANGE:'TimelineMonitor/change',getSection:function(ba){var ca=k.getTop()+j.getScrollPosition().y,da=ba.childSections.getHead();while(da){if(l(da.nodeID)&&ca<j.getElementPosition(da.getNode()).y+j.getElementDimensions(da.getNode()).y)return da;da=da.getNext();}},monitorBoundary:function(ba,ca){ca=ca||ba;if(!n[ca]||n[ca].boundary!==ba){n[ca]={boundary:ba,id:ca};u();}},monitorSection:function(ba){o[ba.id]=null;q.push(ba);u();return aa.getSection(ba);},poke:function(ba){z();}};e.exports=aa;});
__d("TimelineAppSection",["Arbiter","Class","CSS","DOM","DOMQuery","DOMScroll","JSLogger","MedleyPageletRequestData","PageletSet","Style","TidyArbiter","TidyArbiterMixin","TimelineAppCollection","TimelineAppSectionCuration","TimelineDynamicSection","TimelineMonitor","TimelineSection","TimelineSmartInsert","TriggerablePageletLoader","ViewportBounds","copyProperties","csx","cx","ge","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('CSS'),j=b('DOM'),k=b('DOMQuery'),l=b('DOMScroll'),m=b('JSLogger'),n=b('MedleyPageletRequestData'),o=b('PageletSet'),p=b('Style'),q=b('TidyArbiter'),r=b('TidyArbiterMixin'),s=b('TimelineAppCollection'),t=b('TimelineAppSectionCuration'),u=b('TimelineDynamicSection'),v=b('TimelineMonitor'),w=b('TimelineSection'),x=b('TimelineSmartInsert'),y=b('TriggerablePageletLoader'),z=b('ViewportBounds'),aa=b('copyProperties'),ba=b('csx'),ca=b('cx'),da=b('ge'),ea=b('tx'),fa=500,ga=2,ha=500,ia=18,ja=j.create('div',{className:"_3s_"});function ka(){return j.create('span',{className:"_3s18"},[j.create('a',{className:"_3s19"},"More"),j.create('span',{className:"_3s1a"})]);}var la=m.create('collections'),ma={notes:295,events:345,photos:555,app_quoraapp:569,friends:603,app_foodspotting:621,map:621,favorites:645,app_pinterestapp:699,app_instapp:699,books:699,movies:699,tv:699,music:725};function na(pa){return ma[pa.replace('pagelet_timeline_medley_','')];}function oa(pa,qa,ra,sa){this.parent.construct(this,oa.getIDBySK(qa),pa,ra);this._sk=qa;this._title=sa;}h.extend(oa,u);aa(oa,{createFromArray:function(pa){return pa.map(function(qa){return new oa(qa.controller,qa.sk,qa.label,qa.title);});},getIDBySK:function(pa){return 'pagelet_timeline_medley_'+pa;},registerCollections:function(pa,qa,ra){w.callWithSection(oa.getIDBySK(pa),function(sa){s.createFromArray(qa).forEach(sa.appendSection.bind(sa));var ta=sa.childSections.get(ra);sa.setActiveCollection(ta);ta.setIsLoaded(true);});},removeEmptyAppSection:function(pa){w.callWithSection(oa.getIDBySK(pa),function(qa){qa.remove();});}},r);aa(oa.prototype,r,{_createNode:function(){var pa=this.parent._createNode();pa.setAttribute('aria-labelledby','medley_header_'+this._sk);pa.setAttribute('aria-role','region');j.prependContent(pa,j.create('div',{className:"_3cz"},[this._title,j.create('div',{className:"_3dc",'aria-role':'tablist'})]));this.resetMinHeight(pa);return pa;},addAuxContent:function(pa){var qa=k.scry(this.getNode(),"._6ph")[0];qa&&j.appendContent(qa,pa);this._activeCollection&&this._checkTabDimensions(this._activeCollection);},addCurationContent:function(pa,qa){var ra=k.scry(this.getNode(),"._1_cb")[0];ra&&j.appendContent(ra,pa);this._checkCurationContent(qa);},createTriggerLoader:function(pa){var qa=function(ra){this._parentSection._lastLoadedSection=this;this.setIsLoaded(true);x.enable();x.run(this.getNode(),function(){ra();this.unsetMinHeight();v.poke(this._parentSection.id);}.bind(this),'viewport');}.bind(this);q.subscribe('Medley/requestDataSet',function(){this._triggerLoader=new y({controller:this._controller,data:this.getData(),displayCallback:qa,options:{constHeight:true},node:this.getNode()},[{node:this.getNode(),onVisibleBuffer:fa,onVisibleStrict:true,type:pa?y.TRIGGER_NOW:y.TRIGGER_ONVISIBLE}]);}.bind(this));},freeze:function(){i.addClass(this.getNode(),"_c4e");if(da(this.nodeID)&&!this.isLoaded())this._triggerLoader&&this._triggerLoader.disableTriggers();this.freezeChildren();},getData:function(){if(!this._data)this._data=aa({sk:this._sk},n.get(),{overview:this._parentSection._sk!==this._sk});return this._data;},getActiveCollection:function(){return this._activeCollection;},remove:function(){if(o.hasPagelet(this.id))o.removePagelet(this.id);j.remove(this.getNode());this._parentSection.childSections.remove(this.id);},setActiveCollection:function(pa){if(this._activeCollection===pa||!pa._tabNode)return;if(this._activeCollection){g.inform('TimelineSideAds/refresh');la.log('change_collection',{previous_collection:this._activeCollection.getToken(),new_collection:pa.getToken()});this.resetMinHeight();this._activeCollection.disableContentLoader();i.hide(this._activeCollection.getNode());i.removeClass(this._activeCollection._tabNode,"_3s-");j.scry(this._activeCollection._tabNode,"div._3s_").forEach(j.remove);j.appendContent(pa._tabNode,ja.cloneNode(true));this._activeCollection.auxContent&&i.hide(this._activeCollection.auxContent);this._activeCollection.curationContent&&i.hide(this._activeCollection.curationContent);this._activeCollection._tabNode.setAttribute('aria-selected','false');}pa.auxContent&&i.show(pa.auxContent);this._checkCurationContent(pa);this._checkTabDimensions(pa);this._activeCollection=pa;oa.inform('changeCollection');if(!da(pa.nodeID))j.appendContent(k.find(this.getNode(),"div._3i9"),pa.getNode());i.addClass(pa._tabNode,"_3s-");i.show(pa.getNode());pa.isLoaded()&&this.unsetMinHeight();pa._tabNode.setAttribute('aria-selected','true');pa.enableContentLoader();},resetMinHeight:function(pa){pa||(pa=this.getNode());var qa=na(this.id)||pa.offsetHeight-ga;qa>0&&this._updateScrollAfterHeight(pa,qa);},scrollTo:function(pa,qa){var ra=z.getElementPosition(this.getNode());ra.y-=pa||ia;qa&&this._parentSection.toggleScrollLoad(false);l.scrollTo(ra,ha,null,null,function(){ra=z.getElementPosition(this.getNode());ra.y-=pa||ia;l.scrollTo(ra);qa&&this._parentSection.toggleScrollLoad(true);}.bind(this));},thaw:function(){i.removeClass(this.getNode(),"_c4e");this._triggerLoader&&this._triggerLoader.enableTriggers();this.thawChildren();},unsetMinHeight:function(){this._updateScrollAfterHeight(this.getNode(),0);},_updateScrollAfterHeight:function(pa,qa){p.set(pa,'min-height',qa+'px');g.inform('reflow');},_checkCurationContent:function(pa){var qa=k.scry(this.getNode(),"._2zh3")[0];if(qa){i.conditionShow(qa,pa.curationContent);if(pa.curationContent){i.show(pa.curationContent);if(pa.curationContentOpen)t.informState('show',this.id);}else t.informState('hide',this.id);}},_checkTabDimensions:function(pa){if(!this._tabObj){var qa=this.getNode();this._tabObj={aux:j.find(qa,"._6ph"),hidden:0,nav:j.find(qa,"._1_ca"),items:j.scry(qa,"._3c_"),tabs:j.find(qa,"._3dc"),width:0};p.set(this._tabObj.tabs,'visibility','visible');}var ra=this._tabObj,sa=ra.nav.offsetWidth-ra.aux.offsetWidth;if(ra.hidden&&pa._tabNode.parentNode===ra.overflow){j.prependContent(ra.overflow,ra.dropdown.previousSibling);j.insertBefore(ra.dropdown,pa._tabNode);}if(sa-ra.tabs.offsetWidth<0||(ra.hidden&&ra.width!==sa)){var ta=ra.items.length;ra.width=sa;ra.hidden=0;if(!ra.dropdown){ra.dropdown=ka();ra.overflow=j.find(ra.dropdown,"._3s1a");}else for(var ua=0;ua<ta;ua++)j.appendContent(ra.tabs,ra.items[ua]);j.appendContent(ra.tabs,ra.dropdown);for(ua=ta-1;ua>0&&sa-ra.tabs.offsetWidth<0;ua--)if(ra.items[ua]!==pa._tabNode){j.prependContent(ra.overflow,ra.items[ua]);ra.hidden++;}if(!ra.hidden)j.remove(ra.dropdown);}}});e.exports=oa;});
__d("TimelineCoverDisclaimer",["Dialog"],function(a,b,c,d,e,f){var g=b('Dialog');function h(i,j,k){if(h.displayed===undefined){h.displayed=true;}else return;new g().setModal(true).setTitle(i).setBody(j).setButtonsMessage(k).setButtons(g.OK).show();}e.exports=h;});
__d("legacy:TimelineCoverDisclaimer",["TimelineCoverDisclaimer"],function(a,b,c,d){a.TimelineCoverDisclaimer=b('TimelineCoverDisclaimer');},3);
__d("TimelineEditProfileDialogButton",["Event","Arbiter"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i,j={init:function(k,l){g.listen(k,'click',function(){j.hideDialog();if(l)h.inform('timeline_edit_'+l);});},registerDialog:function(k){i=k;},hideDialog:function(){if(i){i.hide();i=null;}}};e.exports=j;});
__d("TimelineMedley",["Class","CSS","DOM","DOMPosition","DOMQuery","PageTransitions","TimelineAppSection","TimelineDynamicSectionConfig","TimelineMonitor","TimelineSection","URI","ViewportBounds","copyProperties","csx","cx","ge","$"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CSS'),i=b('DOM'),j=b('DOMPosition'),k=b('DOMQuery'),l=b('PageTransitions'),m=b('TimelineAppSection'),n=b('TimelineDynamicSectionConfig'),o=b('TimelineMonitor'),p=b('TimelineSection'),q=b('URI'),r=b('ViewportBounds'),s=b('copyProperties'),t=b('csx'),u=b('cx'),v=b('ge'),w=b('$'),x='timeline-medley',y='about',z=2,aa=false;function ba(ea){var fa=ea.getQueryData().sk||ea.getPath().split('/')[2];return n.skmapping[fa]||fa;}function ca(ea){if(ea.getQueryData().id)return ea.getQueryData.id;return ea.getPath().split('/')[1];}function da(ea,fa,ga){this.parent.construct(this,x);this.isOverview=ea.length>1;this._standaloneTeaser=ga.standaloneTeaserGK;n.breaker=ga.breaker;m.createFromArray(ea).forEach(this.appendSection.bind(this));o.monitorSection(this);this._lastLoadedSection=this.childSections.get(m.getIDBySK(fa)).setIsLoaded(true);p.setActiveSectionID(this._lastLoadedSection.id);if(aa&&this.isMedleyView())this.addSectionPlaceholders();var ha=q.getNextURI();this._vanity=ca(ha);this._sk=ba(ha);if(this.isOverview)l.registerHandler(this._transitionHandler.bind(this));}g.extend(da,p);s(da,{loadToSection:function(ea,fa){p.setActiveSectionID(ea);p.callWithSection(x,function(ga){var ha=ga.childSections.getHead(),ia=0;while(ha&&ha.id!==ea){ia++;ha=ha.getNext();}if(!ia)return fa(ha);ia--;ia&&ga.addUpcomingSectionPlaceholders(ga.childSections.getHead(),ia);ga.addSectionPlaceholder(ha,ha.getPrev(),true);var ja=ha.subscribe('loaded',function(){fa(ha);ja.unsubscribe();});});},scrollToSection:function(ea,fa,ga){p.callWithSection(ea,function(ha){ha.scrollTo(fa,ga);});},toggleScrollLoad:function(ea){aa=ea;p.callWithSection(x,function(fa){fa.toggleScrollLoad(ea);});}});s(da.prototype,{addSectionTeasers:function(){if(!this.isMedleyView()&&this._standaloneTeaser){h.removeClass(this.getNode(),"_c4f");this.thawChildren();this.addSectionPlaceholders();this.addSectionBreak();}},addUpcomingSectionPlaceholders:function(ea,fa){fa=fa||z;while(ea=ea.getNext())if(!this.addSectionPlaceholder(ea,ea.getPrev())&&--fa<=0)break;},addSectionPlaceholder:function(ea,fa,ga){if(!ea.isLoaded()&&v(ea.nodeID))return false;if(!v(ea.nodeID)){i.insertAfter(fa.getNode(),ea.getNode());ea.createTriggerLoader(ga);return false;}return true;},addSectionBreak:function(){if(this._lastLoadedSection.getNext()){i.insertAfter(this.childSections.getHead().getNode(),n.breaker);}else i.remove(n.breaker);},addSectionPlaceholders:function(){this.addUpcomingSectionPlaceholders(this._lastLoadedSection);},getNode:function(){return w(this.id);},isMedleyView:function(){return this._sk===y;},toggleScrollLoad:function(ea){aa=ea;if(ea){this.thawChildren();this.addSectionPlaceholders();}else this.freezeChildren();},_transitionHandler:function(ea){if(ca(ea)!==this._vanity)return false;var fa=ba(ea);if(!fa)return false;if(fa===y){return false;}else{var ga=ea.getQueryData();if(!ga.next_cursor)return false;var ha=this.childSections.getHead();while(ha){if(ha._sk===fa){if(!ha._activeCollection&&!k.scry(ha._activeCollection.getNode(),"._3t3")[0])return false;this._transitionToSection.bind(this,ha,ga).defer();return true;}ha=ha.getNext();}}return false;},_transitionToSection:function(ea,fa){var ga=j.getElementPosition(ea.getNode()).y-r.getTop();i.scry(ea.getNode(),"._51k9").forEach(function(ja){h.removeClass(ja,"_51k9");});this._sk=ea._sk;!this._standaloneTeaser&&(this.isOverview=false);p.setActiveSectionID(ea.id);ea.thaw();h.addClass(this.getNode(),"_c4f");this.freezeChildren();var ha=k.find(ea._activeCollection.getNode(),"._3t3");ea._activeCollection.addContentLoader(ha,fa.next_cursor);ea._activeCollection._contentLoader.load({node:ha});if(this._standaloneTeaser){var ia=this.childSections.getHead();while(ia&&ia.id!==ea.id){ia.remove();ia=this.childSections.getHead();}}p.inform('Medley/transitionToSection',ea.id);ea.scrollTo(ga<0?ga:0);l.transitionComplete();}});e.exports=da;});
__d("TimelineNavLight",["CSS","DOM","DOMQuery","Parent","TimelineSection","csx","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('DOMQuery'),j=b('Parent'),k=b('TimelineSection'),l=b('csx'),m=b('cx');function n(o){var p=i.scry(o,"._6-7")[0],q=i.scry(o,"._6-6"),r=j.byClass(o,"_70k").offsetWidth,s=q[q.length-1];if(s.offsetLeft+s.offsetWidth>r)g.addClass(o,"_5215");for(var t=q.length-1;t>1;t--)if(q[t].offsetLeft+q[t].offsetWidth>r){h.remove(q[t]);}else break;var u="_529n";g.removeClass(j.byClass(o,u),u);k.subscribe('Medley/transitionToSection',function(v,w){if(p&&w===p.getAttribute('data-medley-id'))return;p&&g.removeClass(p,"_6-7");for(var x=0;x<q.length;++x)if(q[x].getAttribute('data-medley-id')===w){g.addClass(q[x],"_6-7");p=q[x];return;}});}e.exports=n;});
__d("TimelineOGCollectionAddSelector",["AsyncRequest","DOM","Form","TidyArbiterMixin","copyProperties","csx","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DOM'),i=b('Form'),j=b('TidyArbiterMixin'),k=b('copyProperties'),l=b('csx'),m=b('tidyEvent');function n(o,p,q,r){this._endpoint=q;this._button=o;this._buttonParent=o.parentNode;this._audienceSelector=r;var s=h.find(o,"._4ihv");n.inform('addButton',{button:s,root:this._buttonParent});m([p.getMenu().subscribe('rendered',function(t,u){n.inform('menuOpened',{audienceSelector:r});h.appendContent(h.find(u,"._54ng"),r);}),p.subscribe('itemselected',this._onChange.bind(this))]);}k(n,j);k(n.prototype,j,{_onChange:function(o,p){var q=p.getValue(),r=this.inform('addedToCollection',q)||{};new g(this._endpoint).setData(k(i.serialize(this._audienceSelector),r,{action:'add',collection_token:q,mechanism:'add_selector'})).send();}});e.exports=n;});
__d("TimelineCurationNUXController",["AsyncRequest","CSS","DOM","Event","OGCollectionAddMenu","TimelineOGCollectionAddSelector","URI","$","csx","cx","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('Event'),k=b('OGCollectionAddMenu'),l=b('TimelineOGCollectionAddSelector'),m=b('URI'),n=b('$'),o=b('csx'),p=b('cx'),q=b('tidyEvent'),r=5,s='pagelet_timeline_medley_movies',t=165,u,v,w,x,y,z,aa=[],ba={reports:0,about:1,section:2,section_privacy:3,add_button:4,privacy:5,0:'reports',1:'about',2:'section',3:'section_privacy',4:'add_button',5:'privacy'};function ca(){aa.forEach(function(ma){ma.button&&ma.button.setAttribute('data-hover','tooltip');ma.listener&&ma.listener.remove();});aa.length=0;}function da(ma){if(y[ma]){y[ma].destroy();delete y[ma];ma==='add_button'&&ca();}z[ma]&&z[ma].parentNode&&i.remove(z[ma]);}function ea(ma){if(!h.hasClass(ma,"_50_y")){h.addClass(ma,"_50_y");d(['Animation'],function(na){new na(ma).to('opacity',0).duration(300).ease(na.ease.end).hide().go();});}}function fa(ma){ga(ma);var na=ba[ma]+1;na&&ha(ba[na]);}function ga(ma){new g('/ajax/timeline/collections/tour/curation/').setAllowCrossPageTransition(true).setData({step:ma}).send();da(ma);}function ha(ma){x=ma;switch(ma){case 'reports':d(['TimelineController'],function(na){na.runOnceWhenSectionFullyLoaded(function(){ja(i.find(n('timeline_tab_content'),"._3rbg"),ma);},'recent','0');});break;case 'about':u=i.scry(n('fbTimelineHeadline'),"._6-6")[1];v=q(j.listen(u,'click',function(){u=null;v.remove();x='section';}));ja(u,ma);break;case 'section':if(u){m(u.getAttribute('href')).go();u=null;v&&v.remove();}else d(['OnVisible','TimelineMedley'],function(na,oa){i.appendContent(i.find(n('pagelet_timeline_main_column'),"._2w3"),z.section);q(j.listen(z.section,'click',function(){oa.scrollToSection(s,t,1);ea(z.section);}));oa.loadToSection(s,function(){ja(n(s),ma);var pa=new na(n(s),function(){ea(z.section);pa.remove();},false,-t);});});break;case 'section_privacy':d(['TimelineAppSectionCuration'],function(na){na.informState(na.SHOW_STATE,s);ja(i.scry(n(s),'.audienceSelector')[0],ma);});break;case 'privacy':j.fire(w,'click');break;}}function ia(ma,na){if(y.add_button){var oa=i.scry(na,'[data-hover]')[0];aa.push({button:oa,listener:q(j.listen(ma,'mouseenter',function(){w=ma;ja(ma,'add_button');}))});oa&&oa.removeAttribute('data-hover');}}function ja(ma,na){if(y[na]){y[na].setContext(ma).setOffsetX(5).show();if(na==='privacy')da('add_button');}}function ka(ma,na,oa){var pa=oa.getAttribute('data-action');if(pa==='next'||pa==='done'){fa(ma);}else ga(ma);}var la={init:function(ma){var na=ma.next_step,oa=ba[na];y=ma.dialogs;z=ma.links;ca();if(na==='section'&&na!==x){da('section');da('section_privacy');oa+=2;na=ba[oa];}for(var pa in y)q(y[pa].subscribe('button',ka.curry(pa)));if(y.add_button){var qa=ma.isViewingSelf?l:k;q([qa.subscribe('menuOpened',function(ra,sa){ja.curry(i.find(sa.audienceSelector,'.audienceSelector'),'privacy').defer(r);}),qa.subscribe('addButton',function(ra,sa){ia.curry(sa.button,sa.root).defer(r);})]);}if(ma.isViewingSelf&&oa<ba.add_button)ha(na);}};e.exports=la;});